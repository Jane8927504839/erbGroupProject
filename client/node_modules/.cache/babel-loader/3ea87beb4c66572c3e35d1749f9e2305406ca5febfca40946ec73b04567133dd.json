{"ast":null,"code":"import { ref, onMounted, watch } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'ProductList',\n  setup() {\n    const store = useStore();\n    const products = ref([]);\n    const selectedCategory = ref('');\n    const sortBy = ref('newest');\n    const categories = ['炊具', '刀具', '餐具', '收納', '小電器'];\n    const loadProducts = async () => {\n      try {\n        const response = await fetch(`/api/products?category=${selectedCategory.value}&sort=${sortBy.value}`);\n        const data = await response.json();\n        products.value = data.products;\n      } catch (error) {\n        console.error('加載產品失敗:', error);\n      }\n    };\n    const addToCart = product => {\n      store.dispatch('cart/addItem', product);\n    };\n    onMounted(() => {\n      loadProducts();\n    });\n    watch([selectedCategory, sortBy], loadProducts);\n    return {\n      products,\n      selectedCategory,\n      sortBy,\n      categories,\n      addToCart\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","useStore","name","setup","store","products","selectedCategory","sortBy","categories","loadProducts","response","fetch","value","data","json","error","console","addToCart","product","dispatch"],"sources":["/Users/jianyurui/Desktop/JAVA/JavaScript/erbGroupProject/sample/shopperZ/client/src/views/ProductList.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-4\">\n    <div class=\"home-link-container mb-4\">\n      <router-link to=\"/\" class=\"btn btn-primary home-button\">\n        返回首頁\n      </router-link>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-3\">\n        <!-- 篩選器 -->\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">篩選</h5>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">分類</label>\n              <select v-model=\"selectedCategory\" class=\"form-select\">\n                <option value=\"\">全部</option>\n                <option v-for=\"cat in categories\" :key=\"cat\" :value=\"cat\">\n                  {{ cat }}\n                </option>\n              </select>\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">排序</label>\n              <select v-model=\"sortBy\" class=\"form-select\">\n                <option value=\"newest\">最新</option>\n                <option value=\"price-asc\">價格從低到高</option>\n                <option value=\"price-desc\">價格從高到低</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-9\">\n        <div class=\"row\">\n          <div v-for=\"product in products\" :key=\"product._id\" class=\"col-md-4 mb-4\">\n            <div class=\"card product-card\">\n              <img :src=\"product.images[0]\" class=\"card-img-top product-image\" :alt=\"product.name\">\n              <div class=\"card-body\">\n                <h5 class=\"card-title\">{{ product.name }}</h5>\n                <p class=\"card-text text-danger\">¥{{ product.price }}</p>\n                <button @click=\"addToCart(product)\" class=\"btn btn-primary\">\n                  加入購物車\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- 分頁 -->\n        <nav v-if=\"totalPages > 1\" class=\"mt-4\">\n          <ul class=\"pagination justify-content-center\">\n            <li v-for=\"page in totalPages\" :key=\"page\" class=\"page-item\" \n                :class=\"{ active: page === currentPage }\">\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(page)\">\n                {{ page }}\n              </a>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, watch } from 'vue'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'ProductList',\n  setup() {\n    const store = useStore()\n    const products = ref([])\n    const selectedCategory = ref('')\n    const sortBy = ref('newest')\n    const categories = ['炊具', '刀具', '餐具', '收納', '小電器']\n\n    const loadProducts = async () => {\n      try {\n        const response = await fetch(`/api/products?category=${selectedCategory.value}&sort=${sortBy.value}`)\n        const data = await response.json()\n        products.value = data.products\n      } catch (error) {\n        console.error('加載產品失敗:', error)\n      }\n    }\n\n    const addToCart = (product) => {\n      store.dispatch('cart/addItem', product)\n    }\n\n    onMounted(() => {\n      loadProducts()\n    })\n\n    watch([selectedCategory, sortBy], loadProducts)\n\n    return {\n      products,\n      selectedCategory,\n      sortBy,\n      categories,\n      addToCart\n    }\n  }\n}\n</script>\n\n<style scoped>\n.home-link-container {\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: 20px;\n}\n\n.home-button {\n  background-color: black;\n  border: none;\n  padding: 8px 24px;\n  transition: all 0.3s ease;\n}\n\n.home-button:hover {\n  background-color: #333;\n  transform: translateY(-2px);\n}\n\n/* 添加你的樣式 */\n</style>"],"mappings":"AAiEA,SAASA,GAAG,EAAEC,SAAS,EAAEC,KAAI,QAAS,KAAI;AAC1C,SAASC,QAAO,QAAS,MAAK;AAE9B,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIH,QAAQ,CAAC;IACvB,MAAMI,QAAO,GAAIP,GAAG,CAAC,EAAE;IACvB,MAAMQ,gBAAe,GAAIR,GAAG,CAAC,EAAE;IAC/B,MAAMS,MAAK,GAAIT,GAAG,CAAC,QAAQ;IAC3B,MAAMU,UAAS,GAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK;IAEjD,MAAMC,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAAC,0BAA0BL,gBAAgB,CAACM,KAAK,SAASL,MAAM,CAACK,KAAK,EAAE;QACpG,MAAMC,IAAG,GAAI,MAAMH,QAAQ,CAACI,IAAI,CAAC;QACjCT,QAAQ,CAACO,KAAI,GAAIC,IAAI,CAACR,QAAO;MAC/B,EAAE,OAAOU,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK;MAChC;IACF;IAEA,MAAME,SAAQ,GAAKC,OAAO,IAAK;MAC7Bd,KAAK,CAACe,QAAQ,CAAC,cAAc,EAAED,OAAO;IACxC;IAEAnB,SAAS,CAAC,MAAM;MACdU,YAAY,CAAC;IACf,CAAC;IAEDT,KAAK,CAAC,CAACM,gBAAgB,EAAEC,MAAM,CAAC,EAAEE,YAAY;IAE9C,OAAO;MACLJ,QAAQ;MACRC,gBAAgB;MAChBC,MAAM;MACNC,UAAU;MACVS;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
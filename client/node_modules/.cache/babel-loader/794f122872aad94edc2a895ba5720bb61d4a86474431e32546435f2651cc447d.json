{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-4\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"text-center mt-5\"\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_5 = {\n  class: \"table\"\n};\nconst _hoisted_6 = {\n  class: \"input-group w-auto\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onUpdate:modelValue\"];\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  class: \"d-flex justify-content-end\"\n};\nconst _hoisted_12 = {\n  class: \"me-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"购物车\", -1 /* HOISTED */)), $setup.cartItems.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"p\", null, \"购物车是空的\", -1 /* HOISTED */)), _createVNode(_component_router_link, {\n    to: \"/products\",\n    class: \"btn btn-primary\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\" 去购物 \")])),\n    _: 1 /* STABLE */\n  })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"table\", _hoisted_5, [_cache[3] || (_cache[3] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"商品\"), _createElementVNode(\"th\", null, \"价格\"), _createElementVNode(\"th\", null, \"数量\"), _createElementVNode(\"th\", null, \"小计\"), _createElementVNode(\"th\", null, \"操作\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cartItems, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"td\", null, \"¥\" + _toDisplayString(item.price), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n      class: \"btn btn-outline-secondary\",\n      onClick: $event => $setup.updateQuantity(item, -1)\n    }, \"-\", 8 /* PROPS */, _hoisted_7), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      class: \"form-control text-center\",\n      \"onUpdate:modelValue\": $event => item.quantity = $event,\n      readonly: \"\"\n    }, null, 8 /* PROPS */, _hoisted_8), [[_vModelText, item.quantity]]), _createElementVNode(\"button\", {\n      class: \"btn btn-outline-secondary\",\n      onClick: $event => $setup.updateQuantity(item, 1)\n    }, \"+\", 8 /* PROPS */, _hoisted_9)])]), _createElementVNode(\"td\", null, \"¥\" + _toDisplayString(item.price * item.quantity), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-danger btn-sm\",\n      onClick: $event => $setup.removeItem(item)\n    }, \"删除\", 8 /* PROPS */, _hoisted_10)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"h4\", null, \"总计: ¥\" + _toDisplayString($setup.total), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.checkout && $setup.checkout(...args))\n  }, \"结算\")])]))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","$setup","cartItems","length","_hoisted_2","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","item","_id","_toDisplayString","name","price","_hoisted_6","onClick","$event","updateQuantity","_hoisted_7","type","quantity","readonly","_hoisted_8","_hoisted_9","removeItem","_hoisted_10","_hoisted_11","_hoisted_12","total","args","checkout"],"sources":["/Users/jianyurui/Desktop/JAVA/JavaScript/erbGroupProject/sample/shopperZ/client/src/views/CartPage.vue"],"sourcesContent":["<template>\n    <div class=\"container mt-4\">\n      <h2>购物车</h2>\n      <div v-if=\"cartItems.length === 0\" class=\"text-center mt-5\">\n        <p>购物车是空的</p>\n        <router-link to=\"/products\" class=\"btn btn-primary\">\n          去购物\n        </router-link>\n      </div>\n      <div v-else>\n        <div class=\"table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th>商品</th>\n                <th>价格</th>\n                <th>数量</th>\n                <th>小计</th>\n                <th>操作</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"item in cartItems\" :key=\"item._id\">\n                <td>{{ item.name }}</td>\n                <td>¥{{ item.price }}</td>\n                <td>\n                  <div class=\"input-group w-auto\">\n                    <button class=\"btn btn-outline-secondary\" @click=\"updateQuantity(item, -1)\">-</button>\n                    <input type=\"number\" class=\"form-control text-center\" v-model=\"item.quantity\" readonly>\n                    <button class=\"btn btn-outline-secondary\" @click=\"updateQuantity(item, 1)\">+</button>\n                  </div>\n                </td>\n                <td>¥{{ item.price * item.quantity }}</td>\n                <td>\n                  <button class=\"btn btn-danger btn-sm\" @click=\"removeItem(item)\">删除</button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class=\"d-flex justify-content-end\">\n          <div class=\"me-3\">\n            <h4>总计: ¥{{ total }}</h4>\n          </div>\n          <button class=\"btn btn-primary\" @click=\"checkout\">结算</button>\n        </div>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import { computed } from 'vue'\n  import { useStore } from 'vuex'\n  import { useRouter } from 'vue-router'\n  \n  export default {\n    name: 'Cart',\n    setup() {\n      const store = useStore()\n      const router = useRouter()\n  \n      const cartItems = computed(() => store.state.cart.items)\n      const total = computed(() => {\n        return cartItems.value.reduce((sum, item) => sum + item.price * item.quantity, 0)\n      })\n  \n      const updateQuantity = (item, change) => {\n        const newQuantity = item.quantity + change\n        if (newQuantity > 0) {\n          store.commit('cart/updateQuantity', { id: item._id, quantity: newQuantity })\n        }\n      }\n  \n      const removeItem = (item) => {\n        store.commit('cart/removeItem', item._id)\n      }\n  \n      const checkout = () => {\n        if (!store.state.auth.isLoggedIn) {\n          router.push('/login')\n          return\n        }\n        router.push('/checkout')\n      }\n  \n      return {\n        cartItems,\n        total,\n        updateQuantity,\n        removeItem,\n        checkout\n      }\n    }\n  }\n  </script> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}